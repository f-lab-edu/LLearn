# 운영 가이드: 캐시 · 비동기 · 모니터링 · 트러블슈팅

## 캐시 전략(예시)
- 캐시 대상: 인기 피드, 좋아요 수, 공개 요약 목록, 세션/JWT 블랙리스트
- TTL: 60s~600s(엔드포인트 특성에 맞춤), 랜덤 지연 만료로 스탬피드 방지
- 정합성: 쓰기 시 캐시 무효화, 백그라운드 리빌드(옵션)

## 비동기 처리(예시)
- 요약 등록 → 피드백 생성 작업을 큐로 위임 (Kafka/Celery)
- 재시도/백오프/데드레터 큐 설정
- 프론트는 폴링/웹소켓으로 상태 확인

## 모니터링(예시)
- API: 레이턴시(P50/P95/P99), 에러율(4xx/5xx), QPS
- DB: 연결 수, 슬로우 쿼리, 잠금
- Redis: 캐시 적중률, 메모리 사용, 키 수
- LLM: 호출 수, 평균 지연, 평균 토큰 비용
- 대시보드: Prometheus + Grafana

## 성능/가용성 목표(예시)
- 읽기 P95 `< 300ms`, 쓰기 P95 `< 600ms`
- 월 가용성 **99.9%**

## 트러블슈팅 체크리스트
- 5xx 증가 → 최근 배포/의존성/DB 상태 점검
- 특정 엔드포인트 지연 → 인덱스/쿼리 플랜 확인, 캐시 적용
- LLM 지연/오류 → 타임아웃, 재시도, 서킷브레이커
